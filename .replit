[nix]
channel = "stable-22_11"

[deployment]
run = ["python", "main_replit.py"]
deploymentTarget = "cloudrun"

[[ports]]
localPort = 8000
externalPort = 80

[[ports]]
localPort = 8501
externalPort = 3000

[env]
PYTHONPATH = "/home/runner/ia-fiscal-capivari/src"
PYTHONUNBUFFERED = "1"
REPL_SLUG = "ia-fiscal-capivari"
REPL_OWNER = "your-username"

[gitHubImport]
requiredFiles = [".replit", "replit.nix", "requirements.txt"]

[languages]

[languages.python3]
pattern = "**/*.py"

[languages.python3.languageServer]
start = "pylsp"

[languages.javascript]
pattern = "**/{*.js,*.jsx,*.ts,*.tsx,*.json}"

[languages.javascript.languageServer]
start = "typescript-language-server --stdio"

[workflows]
runButton = "Run IA Fiscal"

[[workflows.workflow]]
name = "Run IA Fiscal"
author = 29295454
mode = "sequential"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "python3 main_replit.py"

[[workflows.workflow]]
name = "KPI Dashboard Only"
author = 29295454
mode = "sequential"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "python3 -m streamlit run src/kpi_bot/dashboard/kpi_dashboard.py --server.port=8501 --server.address=0.0.0.0"
